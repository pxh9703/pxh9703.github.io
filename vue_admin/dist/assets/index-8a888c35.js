import{B as Ce,C as fe,D as z,E as H,g as ae,G as Ve,i as pe,H as Ee,I as xe,e as N,r as Q,h as Oe,J as X,K as Ne,L as ie,o as _,c as P,a as de,n as a,x as o,b as i,q as re,M as Ke,y as x,A as b,N as Y,O as j,t as ue,F as Z,f as ee,P as Se}from"./index-bf53bd19.js";import{p as J,U as B,i as Te,a as Ae,E as ze,d as De,e as we,c as Ie,b as Ue,f as Fe}from"./el-input-e0c2c101.js";import{a as G,b as le,s as Me,E as Le,c as Pe}from"./el-select-b30a4187.js";import{E as je}from"./el-button-7b526dd8.js";import{_ as te,E as Be,u as $e}from"./userRoutes-39c611df.js";import{_ as Re}from"./el-icon-c701fb3b.js";import"./index-c7b392f0.js";const He=(e,{attrs:r,emit:p},{tree:g,key:m})=>{const d=Ce("tree-select"),k={...J(fe(e),Object.keys(G.props)),...r,"onUpdate:modelValue":h=>p(B,h),valueKey:m,popperClass:z(()=>{const h=[d.e("popper")];return e.popperClass&&h.push(e.popperClass),h.join(" ")}),filterMethod:(h="")=>{e.filterMethod&&e.filterMethod(h),H(()=>{var t;(t=g.value)==null||t.filter(h)})},onVisibleChange:h=>{var t;(t=r.onVisibleChange)==null||t.call(r,h),e.filterable&&h&&k.filterMethod()}};return k},Je=ae({extends:le,setup(e,r){const p=le.setup(e,r);delete p.selectOptionClick;const g=Ve().proxy;return H(()=>{p.select.cachedOptions.get(g.value)||p.select.onOptionCreate(g)}),p},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function ne(e){return e||e===0}function oe(e){return Array.isArray(e)&&e.length}function F(e){return Array.isArray(e)?e:ne(e)?[e]:[]}function $(e,r,p,g,m){for(let d=0;d<e.length;d++){const k=e[d];if(r(k,d,e,m))return g?g(k,d,e,m):k;{const h=p(k);if(oe(h)){const t=$(h,r,p,g,k);if(t)return t}}}}function me(e,r,p,g){for(let m=0;m<e.length;m++){const d=e[m];r(d,m,e,g);const k=p(d);oe(k)&&me(k,r,p,d)}}const Ge=(e,{attrs:r,slots:p,emit:g},{select:m,tree:d,key:k})=>{pe(()=>e.modelValue,()=>{e.showCheckbox&&H(()=>{const n=d.value;n&&!Te(n.getCheckedKeys(),F(e.modelValue))&&n.setCheckedKeys(F(e.modelValue))})},{immediate:!0,deep:!0});const h=z(()=>({value:k.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),t=(n,s)=>{var u;const y=h.value[n];return Ee(y)?y(s,(u=d.value)==null?void 0:u.getNode(t("value",s))):s[y]},D=F(e.modelValue).map(n=>$(e.data||[],s=>t("value",s)===n,s=>t("children",s),(s,u,y,K)=>K&&t("value",K))).filter(n=>ne(n)),c=z(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const n=[];return me(e.data.concat(e.cacheData),s=>{const u=t("value",s);n.push({value:u,currentLabel:t("label",s),isDisabled:t("disabled",s)})},s=>t("children",s)),n}),S=z(()=>c.value.reduce((n,s)=>({...n,[s.value]:s}),{}));return{...J(fe(e),Object.keys(te.props)),...r,nodeKey:k,expandOnClickNode:z(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:z(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(D):D),renderContent:(n,{node:s,data:u,store:y})=>n(Je,{value:t("value",u),label:t("label",u),disabled:t("disabled",u)},e.renderContent?()=>e.renderContent(n,{node:s,data:u,store:y}):p.default?()=>p.default({node:s,data:u,store:y}):void 0),filterNodeMethod:(n,s,u)=>{var y;return e.filterNodeMethod?e.filterNodeMethod(n,s,u):n?(y=t("label",s))==null?void 0:y.includes(n):!0},onNodeClick:(n,s,u)=>{var y,K,T;if((y=r.onNodeClick)==null||y.call(r,n,s,u),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||s.isLeaf)){if(!t("disabled",n)){const C=(K=m.value)==null?void 0:K.options.get(t("value",n));(T=m.value)==null||T.handleOptionSelect(C)}}else e.expandOnClickNode&&u.proxy.handleExpandIconClick()},onCheck:(n,s)=>{if(!e.showCheckbox)return;const u=t("value",n),y=s.checkedKeys,K=e.multiple?F(e.modelValue).filter(C=>C in S.value&&!d.value.getNode(C)&&!y.includes(C)):[],T=y.concat(K);if(e.checkStrictly)g(B,e.multiple?T:T.includes(u)?u:void 0);else if(e.multiple)g(B,d.value.getCheckedKeys(!0));else{const C=$([n],O=>!oe(t("children",O))&&!t("disabled",O),O=>t("children",O)),w=C?t("value",C):void 0,q=ne(e.modelValue)&&!!$([n],O=>t("value",O)===e.modelValue,O=>t("children",O));g(B,w===e.modelValue||q?void 0:w)}H(()=>{var C;const w=F(e.modelValue);d.value.setCheckedKeys(w),(C=r.onCheck)==null||C.call(r,n,{checkedKeys:d.value.getCheckedKeys(),checkedNodes:d.value.getCheckedNodes(),halfCheckedKeys:d.value.getHalfCheckedKeys(),halfCheckedNodes:d.value.getHalfCheckedNodes()})})},cacheOptions:c}};var qe=ae({props:{data:{type:Array,default:()=>[]}},setup(e){const r=xe(Me);return pe(()=>e.data,()=>{var p;e.data.forEach(m=>{r.cachedOptions.has(m.value)||r.cachedOptions.set(m.value,m)});const g=((p=r.selectWrapper)==null?void 0:p.querySelectorAll("input"))||[];Array.from(g).includes(document.activeElement)||r.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const We=ae({name:"ElTreeSelect",inheritAttrs:!1,props:{...G.props,...te.props,cacheData:{type:Array,default:()=>[]}},setup(e,r){const{slots:p,expose:g}=r,m=N(),d=N(),k=z(()=>e.nodeKey||e.valueKey||"value"),h=He(e,r,{select:m,tree:d,key:k}),{cacheOptions:t,...D}=Ge(e,r,{select:m,tree:d,key:k}),c=Q({});return g(c),Oe(()=>{Object.assign(c,{...J(d.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...J(m.value,["focus","blur"])})}),()=>X(G,Q({...h,ref:S=>m.value=S}),{...p,default:()=>[X(qe,{data:t.value}),X(te,Q({...D,ref:S=>d.value=S}))]})}});var R=Ne(We,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);R.install=e=>{e.component(R.name,R)};const Qe=R,Xe=Qe;const Ye={class:"btn-group mb-2"},Ze={class:"float-right"},il={__name:"index",setup(e){const{getAllViewsFiles:r,getAllSvgIconsFiles:p}=Ke(),g=r(),m=N(Object.keys(g).map(f=>f.replace("/src/views","").replace(".vue",""))),d=N([{label:"组件库图标",options:Object.keys(ie).map(f=>f)},{label:"自定义图标",options:p()}]);d.value[0].options=Object.keys(ie).map(f=>f);const k=p();d.value[1].options=k;const h=N("add"),t=N(!1),D=f=>{t.value=!0,h.value="edit",c.value=f},c=N({meta:{title:"1"}}),S={},n=N({lest:[],total:20,page:1,pageSize:10}),s=$e(),u=()=>{s.getRouterlist().then(f=>{n.value.list=f.rows})};u();const y=f=>{console.log(f)},K=()=>{switch(h.value){case"add":let f=JSON.parse(JSON.stringify(c.value));f.meta=JSON.stringify(f.meta),console.log(f),s.createrouter(f).then(()=>{u()});break;case"edit":s.updateRouter(c.value).then(()=>{u()});break}t.value=!1},T=f=>{s.deleteRouter({id:f}).then(()=>{u()})},C=f=>{n.value.page=f,u()},w=f=>{n.value.pageSize=f,u()},q=N(null),O=N();return(()=>{s.gettree().then(f=>{O.value=f})})(),(f,v)=>{const U=je,V=De,I=Le,M=Se,W=Re,he=we,ve=Ae,_e=Be,ge=Xe,A=Ie,L=Ue,ce=le,se=G,ke=Pe,ye=Fe,be=ze;return _(),P("div",null,[de("div",Ye,[a(U,{size:"small",plain:"",onClick:v[0]||(v[0]=l=>[h.value="add",t.value=!0,c.value={meta:{}}])},{default:o(()=>[x(" 添加用户 ")]),_:1})]),a(ve,{data:i(n).list,border:""},{default:o(()=>[a(V,{prop:"id",label:"ID",width:"80",align:"center"}),a(V,{prop:"parent_id",label:"父级ID",width:"180",align:"center"}),a(V,{prop:"name",label:"账户",align:"center",width:"120"}),a(V,{prop:"path",label:"路径",align:"center",width:"180"}),a(V,{prop:"component",label:"组件",width:"150",align:"center"}),a(V,{prop:"remark",label:"路由备注",width:"",align:"center"}),a(V,{prop:"status",label:"路由状态",width:"100",align:"center"},{default:o(({row:l})=>[l.status?(_(),b(I,{key:0,onClick:E=>y(l.id)},{default:o(()=>[x("正常")]),_:2},1032,["onClick"])):(_(),b(I,{key:1},{default:o(()=>[x("禁用")]),_:1}))]),_:1}),a(V,{prop:"frameSrc",label:"外链地址",width:"",align:"center"}),a(V,{prop:"hidden",label:"是否隐藏",width:"",align:"center"},{default:o(({row:l})=>[l.hidden=="1"?(_(),b(I,{key:0,onClick:E=>y(l.id)},{default:o(()=>[x("显示")]),_:2},1032,["onClick"])):(_(),b(I,{key:1},{default:o(()=>[x("禁用")]),_:1}))]),_:1}),a(V,{prop:"icon",label:"图标",width:"180",align:"center"},{default:o(({row:l})=>[l.icon&&l.icon.indexOf("icon")==-1?(_(),b(M,{key:0,size:"26px",icon:l.icon},{default:o(()=>[(_(),b(Y(l.icon)))]),_:2},1032,["icon"])):j("",!0),l.icon&&l.icon.indexOf("icon")!=-1?(_(),b(W,{key:1,size:"26",name:l.icon.replace("icon-","")},null,8,["name"])):j("",!0)]),_:1}),a(V,{prop:"title",label:"菜单标题",width:"",align:"center"},{default:o(({row:l})=>[x(ue(JSON.parse(l.meta).title),1)]),_:1}),a(V,{prop:"frameSrcType",label:"外链地址",width:"",align:"center"},{default:o(({row:l})=>[l.frameSrcType=="_self"?(_(),b(I,{key:0},{default:o(()=>[x("正常")]),_:1})):(_(),b(I,{key:1,type:"info"},{default:o(()=>[x("新网页")]),_:1}))]),_:1}),a(V,{label:"操作",width:"200",fixed:"right",align:"center"},{default:o(({row:l})=>[a(U,{size:"small",onClick:E=>D(l)},{default:o(()=>[x("编辑")]),_:2},1032,["onClick"]),a(he,{title:"你确认删除吗?","cancel-button-text":"取消","confirm-button-text":"确认",onConfirm:E=>T(l.id)},{reference:o(()=>[a(U,{size:"small",type:"danger",plain:""},{default:o(()=>[x("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),a(_e,{"current-page":i(n).page,"page-sizes":[10,20,30,40],"page-size":i(n).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:i(n).total,onSizeChange:w,onCurrentChange:C},null,8,["current-page","page-size","total"]),a(be,{modelValue:i(t),"onUpdate:modelValue":v[10]||(v[10]=l=>re(t)?t.value=l:null),title:i(h)=="add"?"添加路由":"编辑路由"},{footer:o(()=>[a(U,{onClick:v[9]||(v[9]=l=>t.value=!1)},{default:o(()=>[x("取消")]),_:1}),a(U,{type:"primary",onClick:K},{default:o(()=>[x("提交")]),_:1})]),default:o(()=>[a(ye,{modelValue:i(c),"onUpdate:modelValue":v[8]||(v[8]=l=>re(c)?c.value=l:null),model:i(c),rules:S},{default:o(()=>[a(A,{label:"父级ID"},{default:o(()=>[a(ge,{ref_key:"tree",ref:q,modelValue:i(c).parent_id,"onUpdate:modelValue":v[1]||(v[1]=l=>i(c).parent_id=l),data:i(O),props:{label:"name",children:"children"},"show-checkbox":"","node-key":"id","default-expand-all":"","check-strictly":"",accordion:"","render-after-expand":!1},null,8,["modelValue","data"])]),_:1}),a(A,{label:"路由名称",prop:"name"},{default:o(()=>[a(L,{modelValue:i(c).name,"onUpdate:modelValue":v[2]||(v[2]=l=>i(c).name=l),placeholder:"请输入路由名称"},null,8,["modelValue"])]),_:1}),a(A,{label:"路由路径",prop:"name"},{default:o(()=>[a(L,{modelValue:i(c).path,"onUpdate:modelValue":v[3]||(v[3]=l=>i(c).path=l),placeholder:"请输入路由路径"},null,8,["modelValue"])]),_:1}),a(A,{label:"路由组件",prop:"name"},{default:o(()=>[a(se,{modelValue:i(c).component,"onUpdate:modelValue":v[4]||(v[4]=l=>i(c).component=l)},{default:o(()=>[(_(!0),P(Z,null,ee(i(m),l=>(_(),b(ce,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(A,{label:"路由备注",prop:"name"},{default:o(()=>[a(L,{modelValue:i(c).remark,"onUpdate:modelValue":v[5]||(v[5]=l=>i(c).remark=l),placeholder:"请输入路由备注"},null,8,["modelValue"])]),_:1}),a(A,{label:"菜单标题",prop:"frameSrc"},{default:o(()=>[a(L,{modelValue:i(c).title,"onUpdate:modelValue":v[6]||(v[6]=l=>i(c).title=l),placeholder:"请输入菜单标题"},null,8,["modelValue"])]),_:1}),a(A,{label:"图标",prop:"icon"},{default:o(()=>[a(se,{modelValue:i(c).icon,"onUpdate:modelValue":v[7]||(v[7]=l=>i(c).icon=l),filterable:""},{default:o(()=>[(_(!0),P(Z,null,ee(i(d),l=>(_(),b(ke,{key:l,label:l.label},{default:o(()=>[(_(!0),P(Z,null,ee(l.options,E=>(_(),b(ce,{key:E,label:E,value:E},{default:o(()=>[E.indexOf("icon")==-1?(_(),b(M,{key:0,icon:E},{default:o(()=>[(_(),b(Y(E)))]),_:2},1032,["icon"])):(_(),b(M,{key:1,icon:E},{default:o(()=>[a(W,{name:E.replace("icon-","")},null,8,["name"])]),_:2},1032,["icon"])),de("span",Ze,ue(E),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),i(c).icon&&i(c).icon.indexOf("icon")==-1?(_(),b(M,{key:0,size:"26px",class:"ml-3",icon:i(c).icon},{default:o(()=>[(_(),b(Y(i(c).icon)))]),_:1},8,["icon"])):j("",!0),i(c).icon&&i(c).icon.indexOf("icon")!=-1?(_(),b(W,{key:1,size:"26",class:"ml-3",name:i(c).icon.replace("icon-","")},null,8,["name"])):j("",!0)]),_:1})]),_:1},8,["modelValue","model"])]),_:1},8,["modelValue","title"])])}}};export{il as default};
